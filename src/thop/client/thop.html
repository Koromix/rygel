<!DOCTYPE html>
<!--
    This Source Code Form is subject to the terms of the Mozilla Public
    License, v. 2.0. If a copy of the MPL was not distributed with this
    file, You can obtain one at http://mozilla.org/MPL/2.0/.
-->
<html>
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1"/>

        <link rel="icon" href="{THOP_BASE_URL}favicon.png" />
        <title>THOP</title>

        <script type="text/javascript">
            let BaseUrl = '{THOP_BASE_URL}';
            let ShowUser = {THOP_SHOW_USER};
            let TableLen = 100;

            let LazyModules = {
                chartjs: '{THOP_BASE_URL}static/chart.min.js',
                xlsx: '{THOP_BASE_URL}static/xlsx.core.min.js'
            };
        </script>

        <link rel="stylesheet" href="{THOP_BASE_URL}static/thop.pk.css"/>
        <script type="text/javascript" src="{THOP_BASE_URL}static/thop.pk.js" async></script>
    </head>

    <body class="hide">
        <div id="side_bar">
            <a id="side_deploy" href="#" onclick="thop.toggleMenu('#side_menu'); return false;"></a>
            <nav id="side_menu">
                <div id="side_session_box" class="hide"></div>

                <img id="logo" src="{THOP_BASE_URL}static/thop_logo.svg" height="160" alt="THOP logo"/>
                <ul>
                    <li id="side_session_menu" class="hide"><a class="category"></a></li>

                    <li><a class="category" data-path="mco_list.routeToUrl({list: 'ghm_roots'});">Tarifs</a></li>
                    <li><a data-path="mco_list.routeToUrl({list: 'ghm_roots'});">Racines de GHM</a></li>
                    <li><a data-path="mco_pricing.routeToUrl({view: 'table'});">Tarifs (grille)</a></li>
                    <li><a data-path="mco_pricing.routeToUrl({view: 'chart'});">Tarifs (courbes)</a></li>

                    <li><a class="category" data-path="mco_tree.routeToUrl();">Listes</a></li>
                    <li><a data-path="mco_tree.routeToUrl();">Arbre de groupage</a></li>
                    <li><a data-path="mco_list.routeToUrl({list: 'ghm_ghs'});">GHM / GHS</a></li>
                    <li><a data-path="mco_list.routeToUrl({list: 'diagnoses'});">Diagnostics</a></li>
                    <li><a data-path="mco_list.routeToUrl({list: 'procedures'});">Actes</a></li>

                    <li><a class="category" data-path="mco_casemix.routeToUrl({view: 'units'});">Activité</a></li>
                    <li><a data-path="mco_casemix.routeToUrl({view: 'units'});">Unités médicales</a></li>
                    <li><a data-path="mco_casemix.routeToUrl({view: 'ghm_roots'});">Racines de GHM</a></li>
                    <li><a data-path="mco_casemix.routeToUrl({view: 'durations'});">Valorisations</a></li>
                    <li><a data-path="mco_casemix.routeToUrl({view: 'results'});">Résumés (RSS)</a></li>
                </ul>
            </nav>

            <div id="side_version">{THOP_VERSION}</div>
        </div>

        <main>
            <a id="opt_deploy" class="deploy" href="#" onclick="thop.toggleMenu('#opt_menu'); return false;"></a>
            <nav id="opt_menu">
                <svg id="opt_index" class="indexes_line"></svg>

                <label id="opt_sector">
                    Secteur
                    <abbr title="Le périmètre des tarifs des GHS est différent&nbsp;:&#013;&#010;&nbsp;&nbsp;Secteur public : prestation complète&#013;&#010;&nbsp;&nbsp;Secteur privé : clinique et personnel non médical">?</abbr>
                    <select onchange="thop.go({sector: this.value});">
                        <option value="public">Public</option>
                        <option value="private">Privé</option>
                    </select>
                </label>

                <label id="opt_diff_index">
                    Comparer
                    <select onchange="thop.go({diff: this.value});"
                            style="width: 12em;"></select>
                </label>

                <label id="opt_max_duration">
                    Durée
                    <input type="number" onchange="thop.go();"
                           value="200" min="0" max="500" step="5"/>
                </label>

                <label id="opt_search">
                    Recherche
                    <input type="search" style="width: 16em;"
                           oninput="thop.go({search: this.value}, null, 200);"/>
                </label>

                <label id="opt_group">
                    Tri
                    <select onchange="thop.go({group: this.value});"></select><br/>
                </label>

                <label id="opt_periods">
                    <div style="display: inline-block;"></div>
                    <div style="display: inline-block;"></div><br/>
                </label>

                <label id="opt_filter">
                    <textarea placeholder="Filtre"
                              oninput="thop.go({filter: this.value}, null, 500);"
                              onfocus="this.rows = 10;" onblur="setTimeout((function() { this.rows = 1; }).bind(this), 500);"
                              rows="1" style="overflow-x: hidden; width: 85%; margin-bottom: 0.5em;
                                              resize: none;"></textarea><br/>
                </label>

                <label id="opt_mode">
                    Comparer
                    <select onchange="thop.go({mode: this.value});">
                        <option value="none">Désactiver</option>
                        <option value="absolute">Absolu</option>
                    </select>
                </label>

                <label id="opt_algorithm">
                    Algorithme
                    <select onchange="thop.go({algorithm: this.value});"></select>
                </label>

                <label id="opt_apply_coefficient">
                    Coefficient prudentiel
                    <input type="checkbox"
                           onchange="thop.go({apply_coefficient: this.checked});"/>
                </label>

                <button id="opt_update" onclick="thop.go({refresh: true});"
                        style="margin-bottom: 0.5em;">Mettre à jour</button>

                <label id="opt_units">
                    <div style="width: 100%;"></div>
                </label>

                <label id="opt_ghm_roots">
                    <div style="width: 100%;"></div>
                </label>

                <label id="opt_ghm_root">
                    <select onchange="thop.go({ghm_root: this.value});"
                            style="width: 96%; margin-top: 4px;"></select><br/>
                </label>
            </nav>
            <div id="log"></div>

            <div id="usr">
                <form>
                    <label>Utilisateur : <input id="usr_username" type="text"/></label>
                    <label>Mot de passe : <input id="usr_password" type="password"/></label>
                    <button onclick="user.login(); return false;">Se connecter</button>
                </form>
            </div>

            <div id="pr">
                <table id="pr_table" class="pr_grid"></table>
                <canvas id="pr_chart" width="400" height="300"></canvas>
            </div>

            <div id="tr">
                <ul id="tr_tree"></ul>
            </div>

            <div id="ls">
                <h1 id="ls_spec"></h1>

                <div id="ls_ghm_roots" class="ls_table"></div>
                <div id="ls_ghm_ghs" class="ls_table"></div>
                <div id="ls_diagnoses" class="ls_table"></div>
                <div id="ls_procedures" class="ls_table"></div>
            </div>

            <div id="cm">
                <div id="cm_ghm_roots" class="cm_summary"></div>
                <div id="cm_units" class="cm_summary"></div>

                <table id="cm_table" class="pr_grid"></table>

                <div id="rt"></div>
            </div>
        </main>
    </body>
</html>
