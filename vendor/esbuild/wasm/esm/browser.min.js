var Je=Object.defineProperty;var Ye=(e,t)=>{for(var n in t)Je(e,n,{get:t[n],enumerable:!0})};var Se={};Ye(Se,{analyzeMetafile:()=>gt,analyzeMetafileSync:()=>ht,build:()=>ut,buildSync:()=>pt,context:()=>ct,default:()=>Rt,formatMessages:()=>dt,formatMessagesSync:()=>yt,initialize:()=>wt,stop:()=>bt,transform:()=>ft,transformSync:()=>mt,version:()=>at});function Me(e){let t=i=>{if(i===null)n.write8(0);else if(typeof i=="boolean")n.write8(1),n.write8(+i);else if(typeof i=="number")n.write8(2),n.write32(i|0);else if(typeof i=="string")n.write8(3),n.write(Z(i));else if(i instanceof Uint8Array)n.write8(4),n.write(i);else if(i instanceof Array){n.write8(5),n.write32(i.length);for(let u of i)t(u)}else{let u=Object.keys(i);n.write8(6),n.write32(u.length);for(let l of u)n.write(Z(l)),t(i[l])}},n=new ye;return n.write32(0),n.write32(e.id<<1|+!e.isRequest),t(e.value),$e(n.buf,n.len-4,0),n.buf.subarray(0,n.len)}function Ae(e){let t=()=>{switch(n.read8()){case 0:return null;case 1:return!!n.read8();case 2:return n.read32();case 3:return le(n.read());case 4:return n.read();case 5:{let g=n.read32(),s=[];for(let p=0;p<g;p++)s.push(t());return s}case 6:{let g=n.read32(),s={};for(let p=0;p<g;p++)s[le(n.read())]=t();return s}default:throw new Error("Invalid packet")}},n=new ye(e),i=n.read32(),u=(i&1)===0;i>>>=1;let l=t();if(n.ptr!==e.length)throw new Error("Invalid packet");return{id:i,isRequest:u,value:l}}var ye=class{constructor(t=new Uint8Array(1024)){this.buf=t;this.len=0;this.ptr=0}_write(t){if(this.len+t>this.buf.length){let n=new Uint8Array((this.len+t)*2);n.set(this.buf),this.buf=n}return this.len+=t,this.len-t}write8(t){let n=this._write(1);this.buf[n]=t}write32(t){let n=this._write(4);$e(this.buf,t,n)}write(t){let n=this._write(4+t.length);$e(this.buf,t.length,n),this.buf.set(t,n+4)}_read(t){if(this.ptr+t>this.buf.length)throw new Error("Invalid packet");return this.ptr+=t,this.ptr-t}read8(){return this.buf[this._read(1)]}read32(){return Ce(this.buf,this._read(4))}read(){let t=this.read32(),n=new Uint8Array(t),i=this._read(n.length);return n.set(this.buf.subarray(i,i+t)),n}},Z,le,ke;if(typeof TextEncoder!="undefined"&&typeof TextDecoder!="undefined"){let e=new TextEncoder,t=new TextDecoder;Z=n=>e.encode(n),le=n=>t.decode(n),ke='new TextEncoder().encode("")'}else if(typeof Buffer!="undefined")Z=e=>Buffer.from(e),le=e=>{let{buffer:t,byteOffset:n,byteLength:i}=e;return Buffer.from(t,n,i).toString()},ke='Buffer.from("")';else throw new Error("No UTF-8 codec found");if(!(Z("")instanceof Uint8Array))throw new Error(`Invariant violation: "${ke} instanceof Uint8Array" is incorrectly false

This indicates that your JavaScript environment is broken. You cannot use
esbuild in this environment because esbuild relies on this invariant. This
is not a problem with esbuild. You need to fix your environment instead.
`);function Ce(e,t){return e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24}function $e(e,t,n){e[n++]=t,e[n++]=t>>8,e[n++]=t>>16,e[n++]=t>>24}var _=JSON.stringify,Fe="warning",Pe="silent";function ge(e,t){let n=[];for(let i of e){if(J(i,t),i.indexOf(",")>=0)throw new Error(`Invalid ${t}: ${i}`);n.push(i)}return n.join(",")}var we=()=>null,I=e=>typeof e=="boolean"?null:"a boolean",m=e=>typeof e=="string"?null:"a string",ve=e=>e instanceof RegExp?null:"a RegExp object",ce=e=>typeof e=="number"&&e===(e|0)?null:"an integer",Qe=e=>typeof e=="number"&&e===(e|0)&&e>=0&&e<=65535?null:"a valid port number",Be=e=>typeof e=="function"?null:"a function",re=e=>Array.isArray(e)?null:"an array",G=e=>Array.isArray(e)&&e.every(t=>typeof t=="string")?null:"an array of strings",Y=e=>typeof e=="object"&&e!==null&&!Array.isArray(e)?null:"an object",He=e=>typeof e=="object"&&e!==null?null:"an array or an object",Xe=e=>e instanceof WebAssembly.Module?null:"a WebAssembly.Module",Te=e=>typeof e=="object"&&!Array.isArray(e)?null:"an object or null",Ue=e=>typeof e=="string"||typeof e=="boolean"?null:"a string or a boolean",Ze=e=>typeof e=="string"||typeof e=="object"&&e!==null&&!Array.isArray(e)?null:"a string or an object",je=e=>typeof e=="string"||Array.isArray(e)&&e.every(t=>typeof t=="string")?null:"a string or an array of strings",Le=e=>typeof e=="string"||e instanceof Uint8Array?null:"a string or a Uint8Array",et=e=>typeof e=="string"||e instanceof URL?null:"a string or a URL";function r(e,t,n,i){let u=e[n];if(t[n+""]=!0,u===void 0)return;let l=i(u);if(l!==null)throw new Error(`${_(n)} must be ${l}`);return u}function K(e,t,n){for(let i in e)if(!(i in t))throw new Error(`Invalid option ${n}: ${_(i)}`)}function Ne(e){let t=Object.create(null),n=r(e,t,"wasmURL",et),i=r(e,t,"wasmModule",Xe),u=r(e,t,"worker",I);return K(e,t,"in initialize() call"),{wasmURL:n,wasmModule:i,worker:u}}function qe(e){let t;if(e!==void 0){t=Object.create(null);for(let n in e){let i=e[n];if(typeof i=="string"||i===!1)t[n]=i;else throw new Error(`Expected ${_(n)} in mangle cache to map to either a string or false`)}}return t}function xe(e,t,n,i,u){let l=r(t,n,"color",I),g=r(t,n,"logLevel",m),s=r(t,n,"logLimit",ce);l!==void 0?e.push(`--color=${l}`):i&&e.push("--color=true"),e.push(`--log-level=${g||u}`),e.push(`--log-limit=${s||0}`)}function J(e,t,n){if(typeof e!="string")throw new Error(`Expected value for ${t}${n!==void 0?" "+_(n):""} to be a string, got ${typeof e} instead`);return e}function Ie(e,t,n){let i=r(t,n,"legalComments",m),u=r(t,n,"sourceRoot",m),l=r(t,n,"sourcesContent",I),g=r(t,n,"target",je),s=r(t,n,"format",m),p=r(t,n,"globalName",m),U=r(t,n,"mangleProps",ve),F=r(t,n,"reserveProps",ve),b=r(t,n,"mangleQuoted",I),j=r(t,n,"minify",I),T=r(t,n,"minifySyntax",I),L=r(t,n,"minifyWhitespace",I),N=r(t,n,"minifyIdentifiers",I),k=r(t,n,"lineLimit",ce),z=r(t,n,"drop",G),V=r(t,n,"dropLabels",G),w=r(t,n,"charset",m),d=r(t,n,"treeShaking",I),f=r(t,n,"ignoreAnnotations",I),o=r(t,n,"jsx",m),v=r(t,n,"jsxFactory",m),O=r(t,n,"jsxFragment",m),M=r(t,n,"jsxImportSource",m),E=r(t,n,"jsxDev",I),a=r(t,n,"jsxSideEffects",I),c=r(t,n,"define",Y),h=r(t,n,"logOverride",Y),C=r(t,n,"supported",Y),P=r(t,n,"pure",G),$=r(t,n,"keepNames",I),R=r(t,n,"platform",m),A=r(t,n,"tsconfigRaw",Ze);if(i&&e.push(`--legal-comments=${i}`),u!==void 0&&e.push(`--source-root=${u}`),l!==void 0&&e.push(`--sources-content=${l}`),g&&e.push(`--target=${ge(Array.isArray(g)?g:[g],"target")}`),s&&e.push(`--format=${s}`),p&&e.push(`--global-name=${p}`),R&&e.push(`--platform=${R}`),A&&e.push(`--tsconfig-raw=${typeof A=="string"?A:JSON.stringify(A)}`),j&&e.push("--minify"),T&&e.push("--minify-syntax"),L&&e.push("--minify-whitespace"),N&&e.push("--minify-identifiers"),k&&e.push(`--line-limit=${k}`),w&&e.push(`--charset=${w}`),d!==void 0&&e.push(`--tree-shaking=${d}`),f&&e.push("--ignore-annotations"),z)for(let x of z)e.push(`--drop:${J(x,"drop")}`);if(V&&e.push(`--drop-labels=${ge(V,"drop label")}`),U&&e.push(`--mangle-props=${Re(U)}`),F&&e.push(`--reserve-props=${Re(F)}`),b!==void 0&&e.push(`--mangle-quoted=${b}`),o&&e.push(`--jsx=${o}`),v&&e.push(`--jsx-factory=${v}`),O&&e.push(`--jsx-fragment=${O}`),M&&e.push(`--jsx-import-source=${M}`),E&&e.push("--jsx-dev"),a&&e.push("--jsx-side-effects"),c)for(let x in c){if(x.indexOf("=")>=0)throw new Error(`Invalid define: ${x}`);e.push(`--define:${x}=${J(c[x],"define",x)}`)}if(h)for(let x in h){if(x.indexOf("=")>=0)throw new Error(`Invalid log override: ${x}`);e.push(`--log-override:${x}=${J(h[x],"log override",x)}`)}if(C)for(let x in C){if(x.indexOf("=")>=0)throw new Error(`Invalid supported: ${x}`);let S=C[x];if(typeof S!="boolean")throw new Error(`Expected value for supported ${_(x)} to be a boolean, got ${typeof S} instead`);e.push(`--supported:${x}=${S}`)}if(P)for(let x of P)e.push(`--pure:${J(x,"pure")}`);$&&e.push("--keep-names")}function tt(e,t,n,i,u){var ae;let l=[],g=[],s=Object.create(null),p=null,U=null;xe(l,t,s,n,i),Ie(l,t,s);let F=r(t,s,"sourcemap",Ue),b=r(t,s,"bundle",I),j=r(t,s,"splitting",I),T=r(t,s,"preserveSymlinks",I),L=r(t,s,"metafile",I),N=r(t,s,"outfile",m),k=r(t,s,"outdir",m),z=r(t,s,"outbase",m),V=r(t,s,"tsconfig",m),w=r(t,s,"resolveExtensions",G),d=r(t,s,"nodePaths",G),f=r(t,s,"mainFields",G),o=r(t,s,"conditions",G),v=r(t,s,"external",G),O=r(t,s,"packages",m),M=r(t,s,"alias",Y),E=r(t,s,"loader",Y),a=r(t,s,"outExtension",Y),c=r(t,s,"publicPath",m),h=r(t,s,"entryNames",m),C=r(t,s,"chunkNames",m),P=r(t,s,"assetNames",m),$=r(t,s,"inject",G),R=r(t,s,"banner",Y),A=r(t,s,"footer",Y),x=r(t,s,"entryPoints",He),S=r(t,s,"absWorkingDir",m),D=r(t,s,"stdin",Y),q=(ae=r(t,s,"write",I))!=null?ae:u,B=r(t,s,"allowOverwrite",I),Q=r(t,s,"mangleCache",Y);if(s.plugins=!0,K(t,s,`in ${e}() call`),F&&l.push(`--sourcemap${F===!0?"":`=${F}`}`),b&&l.push("--bundle"),B&&l.push("--allow-overwrite"),j&&l.push("--splitting"),T&&l.push("--preserve-symlinks"),L&&l.push("--metafile"),N&&l.push(`--outfile=${N}`),k&&l.push(`--outdir=${k}`),z&&l.push(`--outbase=${z}`),V&&l.push(`--tsconfig=${V}`),O&&l.push(`--packages=${O}`),w&&l.push(`--resolve-extensions=${ge(w,"resolve extension")}`),c&&l.push(`--public-path=${c}`),h&&l.push(`--entry-names=${h}`),C&&l.push(`--chunk-names=${C}`),P&&l.push(`--asset-names=${P}`),f&&l.push(`--main-fields=${ge(f,"main field")}`),o&&l.push(`--conditions=${ge(o,"condition")}`),v)for(let y of v)l.push(`--external:${J(y,"external")}`);if(M)for(let y in M){if(y.indexOf("=")>=0)throw new Error(`Invalid package name in alias: ${y}`);l.push(`--alias:${y}=${J(M[y],"alias",y)}`)}if(R)for(let y in R){if(y.indexOf("=")>=0)throw new Error(`Invalid banner file type: ${y}`);l.push(`--banner:${y}=${J(R[y],"banner",y)}`)}if(A)for(let y in A){if(y.indexOf("=")>=0)throw new Error(`Invalid footer file type: ${y}`);l.push(`--footer:${y}=${J(A[y],"footer",y)}`)}if($)for(let y of $)l.push(`--inject:${J(y,"inject")}`);if(E)for(let y in E){if(y.indexOf("=")>=0)throw new Error(`Invalid loader extension: ${y}`);l.push(`--loader:${y}=${J(E[y],"loader",y)}`)}if(a)for(let y in a){if(y.indexOf("=")>=0)throw new Error(`Invalid out extension: ${y}`);l.push(`--out-extension:${y}=${J(a[y],"out extension",y)}`)}if(x)if(Array.isArray(x))for(let y=0,te=x.length;y<te;y++){let H=x[y];if(typeof H=="object"&&H!==null){let ee=Object.create(null),ne=r(H,ee,"in",m),X=r(H,ee,"out",m);if(K(H,ee,"in entry point at index "+y),ne===void 0)throw new Error('Missing property "in" for entry point at index '+y);if(X===void 0)throw new Error('Missing property "out" for entry point at index '+y);g.push([X,ne])}else g.push(["",J(H,"entry point at index "+y)])}else for(let y in x)g.push([y,J(x[y],"entry point",y)]);if(D){let y=Object.create(null),te=r(D,y,"contents",Le),H=r(D,y,"resolveDir",m),ee=r(D,y,"sourcefile",m),ne=r(D,y,"loader",m);K(D,y,'in "stdin" object'),ee&&l.push(`--sourcefile=${ee}`),ne&&l.push(`--loader=${ne}`),H&&(U=H),typeof te=="string"?p=Z(te):te instanceof Uint8Array&&(p=te)}let W=[];if(d)for(let y of d)y+="",W.push(y);return{entries:g,flags:l,write:q,stdinContents:p,stdinResolveDir:U,absWorkingDir:S,nodePaths:W,mangleCache:qe(Q)}}function nt(e,t,n,i){let u=[],l=Object.create(null);xe(u,t,l,n,i),Ie(u,t,l);let g=r(t,l,"sourcemap",Ue),s=r(t,l,"sourcefile",m),p=r(t,l,"loader",m),U=r(t,l,"banner",m),F=r(t,l,"footer",m),b=r(t,l,"mangleCache",Y);return K(t,l,`in ${e}() call`),g&&u.push(`--sourcemap=${g===!0?"external":g}`),s&&u.push(`--sourcefile=${s}`),p&&u.push(`--loader=${p}`),U&&u.push(`--banner=${U}`),F&&u.push(`--footer=${F}`),{flags:u,mangleCache:qe(b)}}function We(e){let t={},n={didClose:!1,reason:""},i={},u=0,l=0,g=new Uint8Array(16*1024),s=0,p=w=>{let d=s+w.length;if(d>g.length){let o=new Uint8Array(d*2);o.set(g),g=o}g.set(w,s),s+=w.length;let f=0;for(;f+4<=s;){let o=Ce(g,f);if(f+4+o>s)break;f+=4,L(g.subarray(f,f+o)),f+=o}f>0&&(g.copyWithin(0,f,s),s-=f)},U=w=>{n.didClose=!0,w&&(n.reason=": "+(w.message||w));let d="The service was stopped"+n.reason;for(let f in i)i[f](d,null);i={}},F=(w,d,f)=>{if(n.didClose)return f("The service is no longer running"+n.reason,null);let o=u++;i[o]=(v,O)=>{try{f(v,O)}finally{w&&w.unref()}},w&&w.ref(),e.writeToStdin(Me({id:o,isRequest:!0,value:d}))},b=(w,d)=>{if(n.didClose)throw new Error("The service is no longer running"+n.reason);e.writeToStdin(Me({id:w,isRequest:!1,value:d}))},j=async(w,d)=>{try{if(d.command==="ping"){b(w,{});return}if(typeof d.key=="number"){let f=t[d.key];if(!f)return;let o=f[d.command];if(o){await o(w,d);return}}throw new Error("Invalid command: "+d.command)}catch(f){let o=[se(f,e,null,void 0,"")];try{b(w,{errors:o})}catch(v){}}},T=!0,L=w=>{if(T){T=!1;let f=String.fromCharCode(...w);if(f!=="0.25.5")throw new Error(`Cannot start service: Host version "0.25.5" does not match binary version ${_(f)}`);return}let d=Ae(w);if(d.isRequest)j(d.id,d.value);else{let f=i[d.id];delete i[d.id],d.value.error?f(d.value.error,{}):f(null,d.value)}};return{readFromStdout:p,afterClose:U,service:{buildOrContext:({callName:w,refs:d,options:f,isTTY:o,defaultWD:v,callback:O})=>{let M=0,E=l++,a={},c={ref(){++M===1&&d&&d.ref()},unref(){--M===0&&(delete t[E],d&&d.unref())}};t[E]=a,c.ref(),rt(w,E,F,b,c,e,a,f,o,v,(h,C)=>{try{O(h,C)}finally{c.unref()}})},transform:({callName:w,refs:d,input:f,options:o,isTTY:v,fs:O,callback:M})=>{let E=ze(),a=c=>{try{if(typeof f!="string"&&!(f instanceof Uint8Array))throw new Error('The input to "transform" must be a string or a Uint8Array');let{flags:h,mangleCache:C}=nt(w,o,v,Pe),P={command:"transform",flags:h,inputFS:c!==null,input:c!==null?Z(c):typeof f=="string"?Z(f):f};C&&(P.mangleCache=C),F(d,P,($,R)=>{if($)return M(new Error($),null);let A=fe(R.errors,E),x=fe(R.warnings,E),S=1,D=()=>{if(--S===0){let q={warnings:x,code:R.code,map:R.map,mangleCache:void 0,legalComments:void 0};"legalComments"in R&&(q.legalComments=R==null?void 0:R.legalComments),R.mangleCache&&(q.mangleCache=R==null?void 0:R.mangleCache),M(null,q)}};if(A.length>0)return M(pe("Transform failed",A,x),null);R.codeFS&&(S++,O.readFile(R.code,(q,B)=>{q!==null?M(q,null):(R.code=B,D())})),R.mapFS&&(S++,O.readFile(R.map,(q,B)=>{q!==null?M(q,null):(R.map=B,D())})),D()})}catch(h){let C=[];try{xe(C,o,{},v,Pe)}catch($){}let P=se(h,e,E,void 0,"");F(d,{command:"error",flags:C,error:P},()=>{P.detail=E.load(P.detail),M(pe("Transform failed",[P],[]),null)})}};if((typeof f=="string"||f instanceof Uint8Array)&&f.length>1024*1024){let c=a;a=()=>O.writeFile(f,c)}a(null)},formatMessages:({callName:w,refs:d,messages:f,options:o,callback:v})=>{if(!o)throw new Error(`Missing second argument in ${w}() call`);let O={},M=r(o,O,"kind",m),E=r(o,O,"color",I),a=r(o,O,"terminalWidth",ce);if(K(o,O,`in ${w}() call`),M===void 0)throw new Error(`Missing "kind" in ${w}() call`);if(M!=="error"&&M!=="warning")throw new Error(`Expected "kind" to be "error" or "warning" in ${w}() call`);let c={command:"format-msgs",messages:ie(f,"messages",null,"",a),isWarning:M==="warning"};E!==void 0&&(c.color=E),a!==void 0&&(c.terminalWidth=a),F(d,c,(h,C)=>{if(h)return v(new Error(h),null);v(null,C.messages)})},analyzeMetafile:({callName:w,refs:d,metafile:f,options:o,callback:v})=>{o===void 0&&(o={});let O={},M=r(o,O,"color",I),E=r(o,O,"verbose",I);K(o,O,`in ${w}() call`);let a={command:"analyze-metafile",metafile:f};M!==void 0&&(a.color=M),E!==void 0&&(a.verbose=E),F(d,a,(c,h)=>{if(c)return v(new Error(c),null);v(null,h.result)})}}}}function rt(e,t,n,i,u,l,g,s,p,U,F){let b=ze(),j=e==="context",T=(k,z)=>{let V=[];try{xe(V,s,{},p,Fe)}catch(d){}let w=se(k,l,b,void 0,z);n(u,{command:"error",flags:V,error:w},()=>{w.detail=b.load(w.detail),F(pe(j?"Context failed":"Build failed",[w],[]),null)})},L;if(typeof s=="object"){let k=s.plugins;if(k!==void 0){if(!Array.isArray(k))return T(new Error('"plugins" must be an array'),"");L=k}}if(L&&L.length>0){if(l.isSync)return T(new Error("Cannot use plugins in synchronous API calls"),"");it(t,n,i,u,l,g,s,L,b).then(k=>{if(!k.ok)return T(k.error,k.pluginName);try{N(k.requestPlugins,k.runOnEndCallbacks,k.scheduleOnDisposeCallbacks)}catch(z){T(z,"")}},k=>T(k,""));return}try{N(null,(k,z)=>z([],[]),()=>{})}catch(k){T(k,"")}function N(k,z,V){let w=l.hasFS,{entries:d,flags:f,write:o,stdinContents:v,stdinResolveDir:O,absWorkingDir:M,nodePaths:E,mangleCache:a}=tt(e,s,p,Fe,w);if(o&&!l.hasFS)throw new Error('The "write" option is unavailable in this environment');let c={command:"build",key:t,entries:d,flags:f,write:o,stdinContents:v,stdinResolveDir:O,absWorkingDir:M||U,nodePaths:E,context:j};k&&(c.plugins=k),a&&(c.mangleCache=a);let h=($,R)=>{let A={errors:fe($.errors,b),warnings:fe($.warnings,b),outputFiles:void 0,metafile:void 0,mangleCache:void 0},x=A.errors.slice(),S=A.warnings.slice();$.outputFiles&&(A.outputFiles=$.outputFiles.map(st)),$.metafile&&(A.metafile=JSON.parse($.metafile)),$.mangleCache&&(A.mangleCache=$.mangleCache),$.writeToStdout!==void 0&&console.log(le($.writeToStdout).replace(/\n$/,"")),z(A,(D,q)=>{if(x.length>0||D.length>0){let B=pe("Build failed",x.concat(D),S.concat(q));return R(B,null,D,q)}R(null,A,D,q)})},C,P;j&&(g["on-end"]=($,R)=>new Promise(A=>{h(R,(x,S,D,q)=>{let B={errors:D,warnings:q};P&&P(x,S),C=void 0,P=void 0,i($,B),A()})})),n(u,c,($,R)=>{if($)return F(new Error($),null);if(!j)return h(R,(S,D)=>(V(),F(S,D)));if(R.errors.length>0)return F(pe("Context failed",R.errors,R.warnings),null);let A=!1,x={rebuild:()=>(C||(C=new Promise((S,D)=>{let q;P=(Q,W)=>{q||(q=()=>Q?D(Q):S(W))};let B=()=>{n(u,{command:"rebuild",key:t},(W,ae)=>{W?D(new Error(W)):q?q():B()})};B()})),C),watch:(S={})=>new Promise((D,q)=>{if(!l.hasFS)throw new Error('Cannot use the "watch" API in this environment');K(S,{},"in watch() call"),n(u,{command:"watch",key:t},W=>{W?q(new Error(W)):D(void 0)})}),serve:(S={})=>new Promise((D,q)=>{if(!l.hasFS)throw new Error('Cannot use the "serve" API in this environment');let B={},Q=r(S,B,"port",Qe),W=r(S,B,"host",m),ae=r(S,B,"servedir",m),y=r(S,B,"keyfile",m),te=r(S,B,"certfile",m),H=r(S,B,"fallback",m),ee=r(S,B,"cors",Y),ne=r(S,B,"onRequest",Be);K(S,B,"in serve() call");let X={command:"serve",key:t,onRequest:!!ne};if(Q!==void 0&&(X.port=Q),W!==void 0&&(X.host=W),ae!==void 0&&(X.servedir=ae),y!==void 0&&(X.keyfile=y),te!==void 0&&(X.certfile=te),H!==void 0&&(X.fallback=H),ee){let de={},ue=r(ee,de,"origin",je);K(ee,de,'on "cors" object'),Array.isArray(ue)?X.corsOrigin=ue:ue!==void 0&&(X.corsOrigin=[ue])}n(u,X,(de,ue)=>{if(de)return q(new Error(de));ne&&(g["serve-request"]=(_e,Ve)=>{ne(Ve.args),i(_e,{})}),D(ue)})}),cancel:()=>new Promise(S=>{if(A)return S();n(u,{command:"cancel",key:t},()=>{S()})}),dispose:()=>new Promise(S=>{if(A)return S();A=!0,n(u,{command:"dispose",key:t},()=>{S(),V(),u.unref()})})};u.ref(),F(null,x)})}}var it=async(e,t,n,i,u,l,g,s,p)=>{let U=[],F=[],b={},j={},T=[],L=0,N=0,k=[],z=!1;s=[...s];for(let d of s){let f={};if(typeof d!="object")throw new Error(`Plugin at index ${N} must be an object`);let o=r(d,f,"name",m);if(typeof o!="string"||o==="")throw new Error(`Plugin at index ${N} is missing a name`);try{let v=r(d,f,"setup",Be);if(typeof v!="function")throw new Error("Plugin is missing a setup function");K(d,f,`on plugin ${_(o)}`);let O={name:o,onStart:!1,onEnd:!1,onResolve:[],onLoad:[]};N++;let E=v({initialOptions:g,resolve:(a,c={})=>{if(!z)throw new Error('Cannot call "resolve" before plugin setup has completed');if(typeof a!="string")throw new Error("The path to resolve must be a string");let h=Object.create(null),C=r(c,h,"pluginName",m),P=r(c,h,"importer",m),$=r(c,h,"namespace",m),R=r(c,h,"resolveDir",m),A=r(c,h,"kind",m),x=r(c,h,"pluginData",we),S=r(c,h,"with",Y);return K(c,h,"in resolve() call"),new Promise((D,q)=>{let B={command:"resolve",path:a,key:e,pluginName:o};if(C!=null&&(B.pluginName=C),P!=null&&(B.importer=P),$!=null&&(B.namespace=$),R!=null&&(B.resolveDir=R),A!=null)B.kind=A;else throw new Error('Must specify "kind" when calling "resolve"');x!=null&&(B.pluginData=p.store(x)),S!=null&&(B.with=lt(S,"with")),t(i,B,(Q,W)=>{Q!==null?q(new Error(Q)):D({errors:fe(W.errors,p),warnings:fe(W.warnings,p),path:W.path,external:W.external,sideEffects:W.sideEffects,namespace:W.namespace,suffix:W.suffix,pluginData:p.load(W.pluginData)})})})},onStart(a){let c='This error came from the "onStart" callback registered here:',h=he(new Error(c),u,"onStart");U.push({name:o,callback:a,note:h}),O.onStart=!0},onEnd(a){let c='This error came from the "onEnd" callback registered here:',h=he(new Error(c),u,"onEnd");F.push({name:o,callback:a,note:h}),O.onEnd=!0},onResolve(a,c){let h='This error came from the "onResolve" callback registered here:',C=he(new Error(h),u,"onResolve"),P={},$=r(a,P,"filter",ve),R=r(a,P,"namespace",m);if(K(a,P,`in onResolve() call for plugin ${_(o)}`),$==null)throw new Error("onResolve() call is missing a filter");let A=L++;b[A]={name:o,callback:c,note:C},O.onResolve.push({id:A,filter:Re($),namespace:R||""})},onLoad(a,c){let h='This error came from the "onLoad" callback registered here:',C=he(new Error(h),u,"onLoad"),P={},$=r(a,P,"filter",ve),R=r(a,P,"namespace",m);if(K(a,P,`in onLoad() call for plugin ${_(o)}`),$==null)throw new Error("onLoad() call is missing a filter");let A=L++;j[A]={name:o,callback:c,note:C},O.onLoad.push({id:A,filter:Re($),namespace:R||""})},onDispose(a){T.push(a)},esbuild:u.esbuild});E&&await E,k.push(O)}catch(v){return{ok:!1,error:v,pluginName:o}}}l["on-start"]=async(d,f)=>{p.clear();let o={errors:[],warnings:[]};await Promise.all(U.map(async({name:v,callback:O,note:M})=>{try{let E=await O();if(E!=null){if(typeof E!="object")throw new Error(`Expected onStart() callback in plugin ${_(v)} to return an object`);let a={},c=r(E,a,"errors",re),h=r(E,a,"warnings",re);K(E,a,`from onStart() callback in plugin ${_(v)}`),c!=null&&o.errors.push(...ie(c,"errors",p,v,void 0)),h!=null&&o.warnings.push(...ie(h,"warnings",p,v,void 0))}}catch(E){o.errors.push(se(E,u,p,M&&M(),v))}})),n(d,o)},l["on-resolve"]=async(d,f)=>{let o={},v="",O,M;for(let E of f.ids)try{({name:v,callback:O,note:M}=b[E]);let a=await O({path:f.path,importer:f.importer,namespace:f.namespace,resolveDir:f.resolveDir,kind:f.kind,pluginData:p.load(f.pluginData),with:f.with});if(a!=null){if(typeof a!="object")throw new Error(`Expected onResolve() callback in plugin ${_(v)} to return an object`);let c={},h=r(a,c,"pluginName",m),C=r(a,c,"path",m),P=r(a,c,"namespace",m),$=r(a,c,"suffix",m),R=r(a,c,"external",I),A=r(a,c,"sideEffects",I),x=r(a,c,"pluginData",we),S=r(a,c,"errors",re),D=r(a,c,"warnings",re),q=r(a,c,"watchFiles",G),B=r(a,c,"watchDirs",G);K(a,c,`from onResolve() callback in plugin ${_(v)}`),o.id=E,h!=null&&(o.pluginName=h),C!=null&&(o.path=C),P!=null&&(o.namespace=P),$!=null&&(o.suffix=$),R!=null&&(o.external=R),A!=null&&(o.sideEffects=A),x!=null&&(o.pluginData=p.store(x)),S!=null&&(o.errors=ie(S,"errors",p,v,void 0)),D!=null&&(o.warnings=ie(D,"warnings",p,v,void 0)),q!=null&&(o.watchFiles=be(q,"watchFiles")),B!=null&&(o.watchDirs=be(B,"watchDirs"));break}}catch(a){o={id:E,errors:[se(a,u,p,M&&M(),v)]};break}n(d,o)},l["on-load"]=async(d,f)=>{let o={},v="",O,M;for(let E of f.ids)try{({name:v,callback:O,note:M}=j[E]);let a=await O({path:f.path,namespace:f.namespace,suffix:f.suffix,pluginData:p.load(f.pluginData),with:f.with});if(a!=null){if(typeof a!="object")throw new Error(`Expected onLoad() callback in plugin ${_(v)} to return an object`);let c={},h=r(a,c,"pluginName",m),C=r(a,c,"contents",Le),P=r(a,c,"resolveDir",m),$=r(a,c,"pluginData",we),R=r(a,c,"loader",m),A=r(a,c,"errors",re),x=r(a,c,"warnings",re),S=r(a,c,"watchFiles",G),D=r(a,c,"watchDirs",G);K(a,c,`from onLoad() callback in plugin ${_(v)}`),o.id=E,h!=null&&(o.pluginName=h),C instanceof Uint8Array?o.contents=C:C!=null&&(o.contents=Z(C)),P!=null&&(o.resolveDir=P),$!=null&&(o.pluginData=p.store($)),R!=null&&(o.loader=R),A!=null&&(o.errors=ie(A,"errors",p,v,void 0)),x!=null&&(o.warnings=ie(x,"warnings",p,v,void 0)),S!=null&&(o.watchFiles=be(S,"watchFiles")),D!=null&&(o.watchDirs=be(D,"watchDirs"));break}}catch(a){o={id:E,errors:[se(a,u,p,M&&M(),v)]};break}n(d,o)};let V=(d,f)=>f([],[]);F.length>0&&(V=(d,f)=>{(async()=>{let o=[],v=[];for(let{name:O,callback:M,note:E}of F){let a,c;try{let h=await M(d);if(h!=null){if(typeof h!="object")throw new Error(`Expected onEnd() callback in plugin ${_(O)} to return an object`);let C={},P=r(h,C,"errors",re),$=r(h,C,"warnings",re);K(h,C,`from onEnd() callback in plugin ${_(O)}`),P!=null&&(a=ie(P,"errors",p,O,void 0)),$!=null&&(c=ie($,"warnings",p,O,void 0))}}catch(h){a=[se(h,u,p,E&&E(),O)]}if(a){o.push(...a);try{d.errors.push(...a)}catch(h){}}if(c){v.push(...c);try{d.warnings.push(...c)}catch(h){}}}f(o,v)})()});let w=()=>{for(let d of T)setTimeout(()=>d(),0)};return z=!0,{ok:!0,requestPlugins:k,runOnEndCallbacks:V,scheduleOnDisposeCallbacks:w}};function ze(){let e=new Map,t=0;return{clear(){e.clear()},load(n){return e.get(n)},store(n){if(n===void 0)return-1;let i=t++;return e.set(i,n),i}}}function he(e,t,n){let i,u=!1;return()=>{if(u)return i;u=!0;try{let l=(e.stack+"").split(`
`);l.splice(1,1);let g=Ke(t,l,n);if(g)return i={text:e.message,location:g},i}catch(l){}}}function se(e,t,n,i,u){let l="Internal error",g=null;try{l=(e&&e.message||e)+""}catch(s){}try{g=Ke(t,(e.stack+"").split(`
`),"")}catch(s){}return{id:"",pluginName:u,text:l,location:g,notes:i?[i]:[],detail:n?n.store(e):-1}}function Ke(e,t,n){let i="    at ";if(e.readFileSync&&!t[0].startsWith(i)&&t[1].startsWith(i))for(let u=1;u<t.length;u++){let l=t[u];if(l.startsWith(i))for(l=l.slice(i.length);;){let g=/^(?:new |async )?\S+ \((.*)\)$/.exec(l);if(g){l=g[1];continue}if(g=/^eval at \S+ \((.*)\)(?:, \S+:\d+:\d+)?$/.exec(l),g){l=g[1];continue}if(g=/^(\S+):(\d+):(\d+)$/.exec(l),g){let s;try{s=e.readFileSync(g[1],"utf8")}catch(b){break}let p=s.split(/\r\n|\r|\n|\u2028|\u2029/)[+g[2]-1]||"",U=+g[3]-1,F=p.slice(U,U+n.length)===n?n.length:0;return{file:g[1],namespace:"file",line:+g[2],column:Z(p.slice(0,U)).length,length:Z(p.slice(U,U+F)).length,lineText:p+`
`+t.slice(1).join(`
`),suggestion:""}}break}}return null}function pe(e,t,n){let i=5;e+=t.length<1?"":` with ${t.length} error${t.length<2?"":"s"}:`+t.slice(0,i+1).map((l,g)=>{if(g===i)return`
...`;if(!l.location)return`
error: ${l.text}`;let{file:s,line:p,column:U}=l.location,F=l.pluginName?`[plugin: ${l.pluginName}] `:"";return`
${s}:${p}:${U}: ERROR: ${F}${l.text}`}).join("");let u=new Error(e);for(let[l,g]of[["errors",t],["warnings",n]])Object.defineProperty(u,l,{configurable:!0,enumerable:!0,get:()=>g,set:s=>Object.defineProperty(u,l,{configurable:!0,enumerable:!0,value:s})});return u}function fe(e,t){for(let n of e)n.detail=t.load(n.detail);return e}function De(e,t,n){if(e==null)return null;let i={},u=r(e,i,"file",m),l=r(e,i,"namespace",m),g=r(e,i,"line",ce),s=r(e,i,"column",ce),p=r(e,i,"length",ce),U=r(e,i,"lineText",m),F=r(e,i,"suggestion",m);if(K(e,i,t),U){let b=U.slice(0,(s&&s>0?s:0)+(p&&p>0?p:0)+(n&&n>0?n:80));!/[\x7F-\uFFFF]/.test(b)&&!/\n/.test(U)&&(U=b)}return{file:u||"",namespace:l||"",line:g||0,column:s||0,length:p||0,lineText:U||"",suggestion:F||""}}function ie(e,t,n,i,u){let l=[],g=0;for(let s of e){let p={},U=r(s,p,"id",m),F=r(s,p,"pluginName",m),b=r(s,p,"text",m),j=r(s,p,"location",Te),T=r(s,p,"notes",re),L=r(s,p,"detail",we),N=`in element ${g} of "${t}"`;K(s,p,N);let k=[];if(T)for(let z of T){let V={},w=r(z,V,"text",m),d=r(z,V,"location",Te);K(z,V,N),k.push({text:w||"",location:De(d,N,u)})}l.push({id:U||"",pluginName:F||i,text:b||"",location:De(j,N,u),notes:k,detail:n?n.store(L):-1}),g++}return l}function be(e,t){let n=[];for(let i of e){if(typeof i!="string")throw new Error(`${_(t)} must be an array of strings`);n.push(i)}return n}function lt(e,t){let n=Object.create(null);for(let i in e){let u=e[i];if(typeof u!="string")throw new Error(`key ${_(i)} in object ${_(t)} must be a string`);n[i]=u}return n}function st({path:e,contents:t,hash:n}){let i=null;return{path:e,contents:t,hash:n,get text(){let u=this.contents;return(i===null||u!==t)&&(t=u,i=le(u)),i}}}function Re(e){let t=e.source;return e.flags&&(t=`(?${e.flags})${t}`),t}var at="0.25.5",ut=e=>me().build(e),ct=e=>me().context(e),ft=(e,t)=>me().transform(e,t),dt=(e,t)=>me().formatMessages(e,t),gt=(e,t)=>me().analyzeMetafile(e,t),pt=()=>{throw new Error('The "buildSync" API only works in node')},mt=()=>{throw new Error('The "transformSync" API only works in node')},yt=()=>{throw new Error('The "formatMessagesSync" API only works in node')},ht=()=>{throw new Error('The "analyzeMetafileSync" API only works in node')},bt=()=>(Oe&&Oe(),Promise.resolve()),oe,Oe,Ee,me=()=>{if(Ee)return Ee;throw oe?new Error('You need to wait for the promise returned from "initialize" to be resolved before calling this'):new Error('You need to call "initialize" before calling this')},wt=e=>{e=Ne(e||{});let t=e.wasmURL,n=e.wasmModule,i=e.worker!==!1;if(!t&&!n)throw new Error('Must provide either the "wasmURL" option or the "wasmModule" option');if(oe)throw new Error('Cannot call "initialize" more than once');return oe=vt(t||"",n,i),oe.catch(()=>{oe=void 0}),oe},vt=async(e,t,n)=>{let i,u,l=new Promise(b=>u=b);if(n){let b=new Blob(['onmessage=(postMessage=>{\n// Copyright 2018 The Go Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style\n// license that can be found in the LICENSE file.\nlet onmessage,globalThis={};for(let r=self;r;r=Object.getPrototypeOf(r))for(let f of Object.getOwnPropertyNames(r))f in globalThis||Object.defineProperty(globalThis,f,{get:()=>self[f]});(()=>{const r=()=>{const c=new Error("not implemented");return c.code="ENOSYS",c};if(!globalThis.fs){let c="";globalThis.fs={constants:{O_WRONLY:-1,O_RDWR:-1,O_CREAT:-1,O_TRUNC:-1,O_APPEND:-1,O_EXCL:-1},writeSync(i,s){c+=y.decode(s);const n=c.lastIndexOf(`\n`);return n!=-1&&(console.log(c.substring(0,n)),c=c.substring(n+1)),s.length},write(i,s,n,o,u,h){if(n!==0||o!==s.length||u!==null){h(r());return}const m=this.writeSync(i,s);h(null,m)},chmod(i,s,n){n(r())},chown(i,s,n,o){o(r())},close(i,s){s(r())},fchmod(i,s,n){n(r())},fchown(i,s,n,o){o(r())},fstat(i,s){s(r())},fsync(i,s){s(null)},ftruncate(i,s,n){n(r())},lchown(i,s,n,o){o(r())},link(i,s,n){n(r())},lstat(i,s){s(r())},mkdir(i,s,n){n(r())},open(i,s,n,o){o(r())},read(i,s,n,o,u,h){h(r())},readdir(i,s){s(r())},readlink(i,s){s(r())},rename(i,s,n){n(r())},rmdir(i,s){s(r())},stat(i,s){s(r())},symlink(i,s,n){n(r())},truncate(i,s,n){n(r())},unlink(i,s){s(r())},utimes(i,s,n,o){o(r())}}}if(globalThis.process||(globalThis.process={getuid(){return-1},getgid(){return-1},geteuid(){return-1},getegid(){return-1},getgroups(){throw r()},pid:-1,ppid:-1,umask(){throw r()},cwd(){throw r()},chdir(){throw r()}}),!globalThis.crypto)throw new Error("globalThis.crypto is not available, polyfill required (crypto.getRandomValues only)");if(!globalThis.performance)throw new Error("globalThis.performance is not available, polyfill required (performance.now only)");if(!globalThis.TextEncoder)throw new Error("globalThis.TextEncoder is not available, polyfill required");if(!globalThis.TextDecoder)throw new Error("globalThis.TextDecoder is not available, polyfill required");const f=new TextEncoder("utf-8"),y=new TextDecoder("utf-8");globalThis.Go=class{constructor(){this.argv=["js"],this.env={},this.exit=t=>{t!==0&&console.warn("exit code:",t)},this._exitPromise=new Promise(t=>{this._resolveExitPromise=t}),this._pendingEvent=null,this._scheduledTimeouts=new Map,this._nextCallbackTimeoutID=1;const c=(t,e)=>{this.mem.setUint32(t+0,e,!0),this.mem.setUint32(t+4,Math.floor(e/4294967296),!0)},i=(t,e)=>{this.mem.setUint32(t+0,e,!0)},s=t=>{const e=this.mem.getUint32(t+0,!0),l=this.mem.getInt32(t+4,!0);return e+l*4294967296},n=t=>{const e=this.mem.getFloat64(t,!0);if(e===0)return;if(!isNaN(e))return e;const l=this.mem.getUint32(t,!0);return this._values[l]},o=(t,e)=>{if(typeof e=="number"&&e!==0){if(isNaN(e)){this.mem.setUint32(t+4,2146959360,!0),this.mem.setUint32(t,0,!0);return}this.mem.setFloat64(t,e,!0);return}if(e===void 0){this.mem.setFloat64(t,0,!0);return}let a=this._ids.get(e);a===void 0&&(a=this._idPool.pop(),a===void 0&&(a=this._values.length),this._values[a]=e,this._goRefCounts[a]=0,this._ids.set(e,a)),this._goRefCounts[a]++;let g=0;switch(typeof e){case"object":e!==null&&(g=1);break;case"string":g=2;break;case"symbol":g=3;break;case"function":g=4;break}this.mem.setUint32(t+4,2146959360|g,!0),this.mem.setUint32(t,a,!0)},u=t=>{const e=s(t+0),l=s(t+8);return new Uint8Array(this._inst.exports.mem.buffer,e,l)},h=t=>{const e=s(t+0),l=s(t+8),a=new Array(l);for(let g=0;g<l;g++)a[g]=n(e+g*8);return a},m=t=>{const e=s(t+0),l=s(t+8);return y.decode(new DataView(this._inst.exports.mem.buffer,e,l))},d=Date.now()-performance.now();this.importObject={_gotest:{add:(t,e)=>t+e},gojs:{"runtime.wasmExit":t=>{t>>>=0;const e=this.mem.getInt32(t+8,!0);this.exited=!0,delete this._inst,delete this._values,delete this._goRefCounts,delete this._ids,delete this._idPool,this.exit(e)},"runtime.wasmWrite":t=>{t>>>=0;const e=s(t+8),l=s(t+16),a=this.mem.getInt32(t+24,!0);globalThis.fs.writeSync(e,new Uint8Array(this._inst.exports.mem.buffer,l,a))},"runtime.resetMemoryDataView":t=>{t>>>=0,this.mem=new DataView(this._inst.exports.mem.buffer)},"runtime.nanotime1":t=>{t>>>=0,c(t+8,(d+performance.now())*1e6)},"runtime.walltime":t=>{t>>>=0;const e=new Date().getTime();c(t+8,e/1e3),this.mem.setInt32(t+16,e%1e3*1e6,!0)},"runtime.scheduleTimeoutEvent":t=>{t>>>=0;const e=this._nextCallbackTimeoutID;this._nextCallbackTimeoutID++,this._scheduledTimeouts.set(e,setTimeout(()=>{for(this._resume();this._scheduledTimeouts.has(e);)console.warn("scheduleTimeoutEvent: missed timeout event"),this._resume()},s(t+8))),this.mem.setInt32(t+16,e,!0)},"runtime.clearTimeoutEvent":t=>{t>>>=0;const e=this.mem.getInt32(t+8,!0);clearTimeout(this._scheduledTimeouts.get(e)),this._scheduledTimeouts.delete(e)},"runtime.getRandomData":t=>{t>>>=0,crypto.getRandomValues(u(t+8))},"syscall/js.finalizeRef":t=>{t>>>=0;const e=this.mem.getUint32(t+8,!0);if(this._goRefCounts[e]--,this._goRefCounts[e]===0){const l=this._values[e];this._values[e]=null,this._ids.delete(l),this._idPool.push(e)}},"syscall/js.stringVal":t=>{t>>>=0,o(t+24,m(t+8))},"syscall/js.valueGet":t=>{t>>>=0;const e=Reflect.get(n(t+8),m(t+16));t=this._inst.exports.getsp()>>>0,o(t+32,e)},"syscall/js.valueSet":t=>{t>>>=0,Reflect.set(n(t+8),m(t+16),n(t+32))},"syscall/js.valueDelete":t=>{t>>>=0,Reflect.deleteProperty(n(t+8),m(t+16))},"syscall/js.valueIndex":t=>{t>>>=0,o(t+24,Reflect.get(n(t+8),s(t+16)))},"syscall/js.valueSetIndex":t=>{t>>>=0,Reflect.set(n(t+8),s(t+16),n(t+24))},"syscall/js.valueCall":t=>{t>>>=0;try{const e=n(t+8),l=Reflect.get(e,m(t+16)),a=h(t+32),g=Reflect.apply(l,e,a);t=this._inst.exports.getsp()>>>0,o(t+56,g),this.mem.setUint8(t+64,1)}catch(e){t=this._inst.exports.getsp()>>>0,o(t+56,e),this.mem.setUint8(t+64,0)}},"syscall/js.valueInvoke":t=>{t>>>=0;try{const e=n(t+8),l=h(t+16),a=Reflect.apply(e,void 0,l);t=this._inst.exports.getsp()>>>0,o(t+40,a),this.mem.setUint8(t+48,1)}catch(e){t=this._inst.exports.getsp()>>>0,o(t+40,e),this.mem.setUint8(t+48,0)}},"syscall/js.valueNew":t=>{t>>>=0;try{const e=n(t+8),l=h(t+16),a=Reflect.construct(e,l);t=this._inst.exports.getsp()>>>0,o(t+40,a),this.mem.setUint8(t+48,1)}catch(e){t=this._inst.exports.getsp()>>>0,o(t+40,e),this.mem.setUint8(t+48,0)}},"syscall/js.valueLength":t=>{t>>>=0,c(t+16,parseInt(n(t+8).length))},"syscall/js.valuePrepareString":t=>{t>>>=0;const e=f.encode(String(n(t+8)));o(t+16,e),c(t+24,e.length)},"syscall/js.valueLoadString":t=>{t>>>=0;const e=n(t+8);u(t+16).set(e)},"syscall/js.valueInstanceOf":t=>{t>>>=0,this.mem.setUint8(t+24,n(t+8)instanceof n(t+16)?1:0)},"syscall/js.copyBytesToGo":t=>{t>>>=0;const e=u(t+8),l=n(t+32);if(!(l instanceof Uint8Array||l instanceof Uint8ClampedArray)){this.mem.setUint8(t+48,0);return}const a=l.subarray(0,e.length);e.set(a),c(t+40,a.length),this.mem.setUint8(t+48,1)},"syscall/js.copyBytesToJS":t=>{t>>>=0;const e=n(t+8),l=u(t+16);if(!(e instanceof Uint8Array||e instanceof Uint8ClampedArray)){this.mem.setUint8(t+48,0);return}const a=l.subarray(0,e.length);e.set(a),c(t+40,a.length),this.mem.setUint8(t+48,1)},debug:t=>{console.log(t)}}}}async run(c){if(!(c instanceof WebAssembly.Instance))throw new Error("Go.run: WebAssembly.Instance expected");this._inst=c,this.mem=new DataView(this._inst.exports.mem.buffer),this._values=[NaN,0,null,!0,!1,globalThis,this],this._goRefCounts=new Array(this._values.length).fill(1/0),this._ids=new Map([[0,1],[null,2],[!0,3],[!1,4],[globalThis,5],[this,6]]),this._idPool=[],this.exited=!1;let i=4096;const s=d=>{const t=i,e=f.encode(d+"\\0");return new Uint8Array(this.mem.buffer,i,e.length).set(e),i+=e.length,i%8!==0&&(i+=8-i%8),t},n=this.argv.length,o=[];this.argv.forEach(d=>{o.push(s(d))}),o.push(0),Object.keys(this.env).sort().forEach(d=>{o.push(s(`${d}=${this.env[d]}`))}),o.push(0);const h=i;if(o.forEach(d=>{this.mem.setUint32(i,d,!0),this.mem.setUint32(i+4,0,!0),i+=8}),i>=12288)throw new Error("total length of command line and environment variables exceeds limit");this._inst.exports.run(n,h),this.exited&&this._resolveExitPromise(),await this._exitPromise}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(c){const i=this;return function(){const s={id:c,this:this,args:arguments};return i._pendingEvent=s,i._resume(),s.result}}}})(),onmessage=({data:r})=>{let f=new TextDecoder,y=globalThis.fs,c="";y.writeSync=(u,h)=>{if(u===1)postMessage(h);else if(u===2){c+=f.decode(h);let m=c.split(`\n`);m.length>1&&console.log(m.slice(0,-1).join(`\n`)),c=m[m.length-1]}else throw new Error("Bad write");return h.length};let i=[],s,n=0;onmessage=({data:u})=>(u.length>0&&(i.push(u),s&&s()),o),y.read=(u,h,m,d,t,e)=>{if(u!==0||m!==0||d!==h.length||t!==null)throw new Error("Bad read");if(i.length===0){s=()=>y.read(u,h,m,d,t,e);return}let l=i[0],a=Math.max(0,Math.min(d,l.length-n));h.set(l.subarray(n,n+a),m),n+=a,n===l.length&&(i.shift(),n=0),e(null,a)};let o=new globalThis.Go;return o.argv=["","--service=0.25.5"],tryToInstantiateModule(r,o).then(u=>{postMessage(null),o.run(u)},u=>{postMessage(u)}),o};async function tryToInstantiateModule(r,f){if(r instanceof WebAssembly.Module)return WebAssembly.instantiate(r,f.importObject);const y=await fetch(r);if(!y.ok)throw new Error(`Failed to download ${JSON.stringify(r)}`);if("instantiateStreaming"in WebAssembly&&/^application\\/wasm($|;)/i.test(y.headers.get("Content-Type")||""))return(await WebAssembly.instantiateStreaming(y,f.importObject)).instance;const c=await y.arrayBuffer();return(await WebAssembly.instantiate(c,f.importObject)).instance}return r=>onmessage(r);})(postMessage)'],{type:"text/javascript"});i=new Worker(URL.createObjectURL(b))}else{let b=(postMessage=>{
// Copyright 2018 The Go Authors. All rights reserved.
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
let onmessage,globalThis={};for(let r=self;r;r=Object.getPrototypeOf(r))for(let f of Object.getOwnPropertyNames(r))f in globalThis||Object.defineProperty(globalThis,f,{get:()=>self[f]});(()=>{const r=()=>{const c=new Error("not implemented");return c.code="ENOSYS",c};if(!globalThis.fs){let c="";globalThis.fs={constants:{O_WRONLY:-1,O_RDWR:-1,O_CREAT:-1,O_TRUNC:-1,O_APPEND:-1,O_EXCL:-1},writeSync(i,s){c+=y.decode(s);const n=c.lastIndexOf(`
`);return n!=-1&&(console.log(c.substring(0,n)),c=c.substring(n+1)),s.length},write(i,s,n,o,u,h){if(n!==0||o!==s.length||u!==null){h(r());return}const m=this.writeSync(i,s);h(null,m)},chmod(i,s,n){n(r())},chown(i,s,n,o){o(r())},close(i,s){s(r())},fchmod(i,s,n){n(r())},fchown(i,s,n,o){o(r())},fstat(i,s){s(r())},fsync(i,s){s(null)},ftruncate(i,s,n){n(r())},lchown(i,s,n,o){o(r())},link(i,s,n){n(r())},lstat(i,s){s(r())},mkdir(i,s,n){n(r())},open(i,s,n,o){o(r())},read(i,s,n,o,u,h){h(r())},readdir(i,s){s(r())},readlink(i,s){s(r())},rename(i,s,n){n(r())},rmdir(i,s){s(r())},stat(i,s){s(r())},symlink(i,s,n){n(r())},truncate(i,s,n){n(r())},unlink(i,s){s(r())},utimes(i,s,n,o){o(r())}}}if(globalThis.process||(globalThis.process={getuid(){return-1},getgid(){return-1},geteuid(){return-1},getegid(){return-1},getgroups(){throw r()},pid:-1,ppid:-1,umask(){throw r()},cwd(){throw r()},chdir(){throw r()}}),!globalThis.crypto)throw new Error("globalThis.crypto is not available, polyfill required (crypto.getRandomValues only)");if(!globalThis.performance)throw new Error("globalThis.performance is not available, polyfill required (performance.now only)");if(!globalThis.TextEncoder)throw new Error("globalThis.TextEncoder is not available, polyfill required");if(!globalThis.TextDecoder)throw new Error("globalThis.TextDecoder is not available, polyfill required");const f=new TextEncoder("utf-8"),y=new TextDecoder("utf-8");globalThis.Go=class{constructor(){this.argv=["js"],this.env={},this.exit=t=>{t!==0&&console.warn("exit code:",t)},this._exitPromise=new Promise(t=>{this._resolveExitPromise=t}),this._pendingEvent=null,this._scheduledTimeouts=new Map,this._nextCallbackTimeoutID=1;const c=(t,e)=>{this.mem.setUint32(t+0,e,!0),this.mem.setUint32(t+4,Math.floor(e/4294967296),!0)},i=(t,e)=>{this.mem.setUint32(t+0,e,!0)},s=t=>{const e=this.mem.getUint32(t+0,!0),l=this.mem.getInt32(t+4,!0);return e+l*4294967296},n=t=>{const e=this.mem.getFloat64(t,!0);if(e===0)return;if(!isNaN(e))return e;const l=this.mem.getUint32(t,!0);return this._values[l]},o=(t,e)=>{if(typeof e=="number"&&e!==0){if(isNaN(e)){this.mem.setUint32(t+4,2146959360,!0),this.mem.setUint32(t,0,!0);return}this.mem.setFloat64(t,e,!0);return}if(e===void 0){this.mem.setFloat64(t,0,!0);return}let a=this._ids.get(e);a===void 0&&(a=this._idPool.pop(),a===void 0&&(a=this._values.length),this._values[a]=e,this._goRefCounts[a]=0,this._ids.set(e,a)),this._goRefCounts[a]++;let g=0;switch(typeof e){case"object":e!==null&&(g=1);break;case"string":g=2;break;case"symbol":g=3;break;case"function":g=4;break}this.mem.setUint32(t+4,2146959360|g,!0),this.mem.setUint32(t,a,!0)},u=t=>{const e=s(t+0),l=s(t+8);return new Uint8Array(this._inst.exports.mem.buffer,e,l)},h=t=>{const e=s(t+0),l=s(t+8),a=new Array(l);for(let g=0;g<l;g++)a[g]=n(e+g*8);return a},m=t=>{const e=s(t+0),l=s(t+8);return y.decode(new DataView(this._inst.exports.mem.buffer,e,l))},d=Date.now()-performance.now();this.importObject={_gotest:{add:(t,e)=>t+e},gojs:{"runtime.wasmExit":t=>{t>>>=0;const e=this.mem.getInt32(t+8,!0);this.exited=!0,delete this._inst,delete this._values,delete this._goRefCounts,delete this._ids,delete this._idPool,this.exit(e)},"runtime.wasmWrite":t=>{t>>>=0;const e=s(t+8),l=s(t+16),a=this.mem.getInt32(t+24,!0);globalThis.fs.writeSync(e,new Uint8Array(this._inst.exports.mem.buffer,l,a))},"runtime.resetMemoryDataView":t=>{t>>>=0,this.mem=new DataView(this._inst.exports.mem.buffer)},"runtime.nanotime1":t=>{t>>>=0,c(t+8,(d+performance.now())*1e6)},"runtime.walltime":t=>{t>>>=0;const e=new Date().getTime();c(t+8,e/1e3),this.mem.setInt32(t+16,e%1e3*1e6,!0)},"runtime.scheduleTimeoutEvent":t=>{t>>>=0;const e=this._nextCallbackTimeoutID;this._nextCallbackTimeoutID++,this._scheduledTimeouts.set(e,setTimeout(()=>{for(this._resume();this._scheduledTimeouts.has(e);)console.warn("scheduleTimeoutEvent: missed timeout event"),this._resume()},s(t+8))),this.mem.setInt32(t+16,e,!0)},"runtime.clearTimeoutEvent":t=>{t>>>=0;const e=this.mem.getInt32(t+8,!0);clearTimeout(this._scheduledTimeouts.get(e)),this._scheduledTimeouts.delete(e)},"runtime.getRandomData":t=>{t>>>=0,crypto.getRandomValues(u(t+8))},"syscall/js.finalizeRef":t=>{t>>>=0;const e=this.mem.getUint32(t+8,!0);if(this._goRefCounts[e]--,this._goRefCounts[e]===0){const l=this._values[e];this._values[e]=null,this._ids.delete(l),this._idPool.push(e)}},"syscall/js.stringVal":t=>{t>>>=0,o(t+24,m(t+8))},"syscall/js.valueGet":t=>{t>>>=0;const e=Reflect.get(n(t+8),m(t+16));t=this._inst.exports.getsp()>>>0,o(t+32,e)},"syscall/js.valueSet":t=>{t>>>=0,Reflect.set(n(t+8),m(t+16),n(t+32))},"syscall/js.valueDelete":t=>{t>>>=0,Reflect.deleteProperty(n(t+8),m(t+16))},"syscall/js.valueIndex":t=>{t>>>=0,o(t+24,Reflect.get(n(t+8),s(t+16)))},"syscall/js.valueSetIndex":t=>{t>>>=0,Reflect.set(n(t+8),s(t+16),n(t+24))},"syscall/js.valueCall":t=>{t>>>=0;try{const e=n(t+8),l=Reflect.get(e,m(t+16)),a=h(t+32),g=Reflect.apply(l,e,a);t=this._inst.exports.getsp()>>>0,o(t+56,g),this.mem.setUint8(t+64,1)}catch(e){t=this._inst.exports.getsp()>>>0,o(t+56,e),this.mem.setUint8(t+64,0)}},"syscall/js.valueInvoke":t=>{t>>>=0;try{const e=n(t+8),l=h(t+16),a=Reflect.apply(e,void 0,l);t=this._inst.exports.getsp()>>>0,o(t+40,a),this.mem.setUint8(t+48,1)}catch(e){t=this._inst.exports.getsp()>>>0,o(t+40,e),this.mem.setUint8(t+48,0)}},"syscall/js.valueNew":t=>{t>>>=0;try{const e=n(t+8),l=h(t+16),a=Reflect.construct(e,l);t=this._inst.exports.getsp()>>>0,o(t+40,a),this.mem.setUint8(t+48,1)}catch(e){t=this._inst.exports.getsp()>>>0,o(t+40,e),this.mem.setUint8(t+48,0)}},"syscall/js.valueLength":t=>{t>>>=0,c(t+16,parseInt(n(t+8).length))},"syscall/js.valuePrepareString":t=>{t>>>=0;const e=f.encode(String(n(t+8)));o(t+16,e),c(t+24,e.length)},"syscall/js.valueLoadString":t=>{t>>>=0;const e=n(t+8);u(t+16).set(e)},"syscall/js.valueInstanceOf":t=>{t>>>=0,this.mem.setUint8(t+24,n(t+8)instanceof n(t+16)?1:0)},"syscall/js.copyBytesToGo":t=>{t>>>=0;const e=u(t+8),l=n(t+32);if(!(l instanceof Uint8Array||l instanceof Uint8ClampedArray)){this.mem.setUint8(t+48,0);return}const a=l.subarray(0,e.length);e.set(a),c(t+40,a.length),this.mem.setUint8(t+48,1)},"syscall/js.copyBytesToJS":t=>{t>>>=0;const e=n(t+8),l=u(t+16);if(!(e instanceof Uint8Array||e instanceof Uint8ClampedArray)){this.mem.setUint8(t+48,0);return}const a=l.subarray(0,e.length);e.set(a),c(t+40,a.length),this.mem.setUint8(t+48,1)},debug:t=>{console.log(t)}}}}async run(c){if(!(c instanceof WebAssembly.Instance))throw new Error("Go.run: WebAssembly.Instance expected");this._inst=c,this.mem=new DataView(this._inst.exports.mem.buffer),this._values=[NaN,0,null,!0,!1,globalThis,this],this._goRefCounts=new Array(this._values.length).fill(1/0),this._ids=new Map([[0,1],[null,2],[!0,3],[!1,4],[globalThis,5],[this,6]]),this._idPool=[],this.exited=!1;let i=4096;const s=d=>{const t=i,e=f.encode(d+"\0");return new Uint8Array(this.mem.buffer,i,e.length).set(e),i+=e.length,i%8!==0&&(i+=8-i%8),t},n=this.argv.length,o=[];this.argv.forEach(d=>{o.push(s(d))}),o.push(0),Object.keys(this.env).sort().forEach(d=>{o.push(s(`${d}=${this.env[d]}`))}),o.push(0);const h=i;if(o.forEach(d=>{this.mem.setUint32(i,d,!0),this.mem.setUint32(i+4,0,!0),i+=8}),i>=12288)throw new Error("total length of command line and environment variables exceeds limit");this._inst.exports.run(n,h),this.exited&&this._resolveExitPromise(),await this._exitPromise}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(c){const i=this;return function(){const s={id:c,this:this,args:arguments};return i._pendingEvent=s,i._resume(),s.result}}}})(),onmessage=({data:r})=>{let f=new TextDecoder,y=globalThis.fs,c="";y.writeSync=(u,h)=>{if(u===1)postMessage(h);else if(u===2){c+=f.decode(h);let m=c.split(`
`);m.length>1&&console.log(m.slice(0,-1).join(`
`)),c=m[m.length-1]}else throw new Error("Bad write");return h.length};let i=[],s,n=0;onmessage=({data:u})=>(u.length>0&&(i.push(u),s&&s()),o),y.read=(u,h,m,d,t,e)=>{if(u!==0||m!==0||d!==h.length||t!==null)throw new Error("Bad read");if(i.length===0){s=()=>y.read(u,h,m,d,t,e);return}let l=i[0],a=Math.max(0,Math.min(d,l.length-n));h.set(l.subarray(n,n+a),m),n+=a,n===l.length&&(i.shift(),n=0),e(null,a)};let o=new globalThis.Go;return o.argv=["","--service=0.25.5"],tryToInstantiateModule(r,o).then(u=>{postMessage(null),o.run(u)},u=>{postMessage(u)}),o};async function tryToInstantiateModule(r,f){if(r instanceof WebAssembly.Module)return WebAssembly.instantiate(r,f.importObject);const y=await fetch(r);if(!y.ok)throw new Error(`Failed to download ${JSON.stringify(r)}`);if("instantiateStreaming"in WebAssembly&&/^application\/wasm($|;)/i.test(y.headers.get("Content-Type")||""))return(await WebAssembly.instantiateStreaming(y,f.importObject)).instance;const c=await y.arrayBuffer();return(await WebAssembly.instantiate(c,f.importObject)).instance}return r=>onmessage(r);})(T=>i.onmessage({data:T})),j;i={onmessage:null,postMessage:T=>setTimeout(()=>{try{j=b({data:T})}catch(L){u(L)}}),terminate(){if(j)for(let T of j._scheduledTimeouts.values())clearTimeout(T)}}}let g,s,p=new Promise((b,j)=>{g=b,s=j});i.onmessage=({data:b})=>{i.onmessage=({data:j})=>U(j),b?s(b):g()},i.postMessage(t||new URL(e,location.href).toString());let{readFromStdout:U,service:F}=We({writeToStdin(b){i.postMessage(b)},isSync:!1,hasFS:!1,esbuild:Se});await p,Oe=()=>{i.terminate(),oe=void 0,Oe=void 0,Ee=void 0},Ee={build:b=>new Promise((j,T)=>{l.then(T),F.buildOrContext({callName:"build",refs:null,options:b,isTTY:!1,defaultWD:"/",callback:(L,N)=>L?T(L):j(N)})}),context:b=>new Promise((j,T)=>{l.then(T),F.buildOrContext({callName:"context",refs:null,options:b,isTTY:!1,defaultWD:"/",callback:(L,N)=>L?T(L):j(N)})}),transform:(b,j)=>new Promise((T,L)=>{l.then(L),F.transform({callName:"transform",refs:null,input:b,options:j||{},isTTY:!1,fs:{readFile(N,k){k(new Error("Internal error"),null)},writeFile(N,k){k(null)}},callback:(N,k)=>N?L(N):T(k)})}),formatMessages:(b,j)=>new Promise((T,L)=>{l.then(L),F.formatMessages({callName:"formatMessages",refs:null,messages:b,options:j,callback:(N,k)=>N?L(N):T(k)})}),analyzeMetafile:(b,j)=>new Promise((T,L)=>{l.then(L),F.analyzeMetafile({callName:"analyzeMetafile",refs:null,metafile:typeof b=="string"?b:JSON.stringify(b),options:j,callback:(N,k)=>N?L(N):T(k)})})}},Rt=Se;export{gt as analyzeMetafile,ht as analyzeMetafileSync,ut as build,pt as buildSync,ct as context,Rt as default,dt as formatMessages,yt as formatMessagesSync,wt as initialize,bt as stop,ft as transform,mt as transformSync,at as version};
